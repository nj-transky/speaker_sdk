// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/skylink_server/skylink_server.proto)

#pragma once

#include <array>
#include <cmath>
#include <functional>
#include <limits>
#include <memory>
#include <string>
#include <utility>
#include <vector>


#include "server_plugin_base.h"

#include "handle.h"

namespace mavsdk {


class ServerComponent;
class SkylinkServerImpl;

/**
 * @brief Can be used to manage skylinks that implement the MAVLink
 * SkylinkServer Protocol: .
 *
 * Currently only a single skylink_server is supported.
 * When multiple skylinks are supported the plugin will need to be
 * instantiated separately for every skylink_server
 */
class SkylinkServer : public ServerPluginBase {
public:

    /**
     * @brief Constructor. Creates the plugin for a ServerComponent instance.
     *
     * The plugin is typically created as shown below:
     *
     *     ```cpp
     *     auto skylink_server = SkylinkServer(server_component);
     *     ```
     *
     * @param server_component The ServerComponent instance associated with this server plugin.
     */
    explicit SkylinkServer(std::shared_ptr<ServerComponent> server_component);


    /**
     * @brief Destructor (internal use only).
     */
    ~SkylinkServer() override;


    /**
     * @brief Possible feedback results for skylink respond command.
     */
    enum class SkylinkFeedback {
        Unknown, /**< @brief Unknown. */
        Ok, /**< @brief Ok. */
        Busy, /**< @brief Busy. */
        Failed, /**< @brief Failed. */
        Inprogress, /**< @brief In progress. */
        Denied, /**< @brief Denied. */
    };

    /**
     * @brief Stream operator to print information about a `SkylinkServer::SkylinkFeedback`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::SkylinkFeedback const& skylink_feedback);

    /**
     * @brief File update type.
     */
    enum class FileUpdateType {
        None, /**< @brief Unknown file update type. */
        Add, /**< @brief File added. */
        Remove, /**< @brief File deleted. */
        Rename, /**< @brief File renamed. */
        Modify, /**< @brief File modified. */
    };

    /**
     * @brief Stream operator to print information about a `SkylinkServer::FileUpdateType`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::FileUpdateType const& file_update_type);





    /**
     * @brief Possible results returned for skylink commands
     */
    enum class Result {
        Unknown, /**< @brief Unknown result. */
        Success, /**< @brief Command executed successfully. */
        InProgress, /**< @brief Command in progress. */
        Busy, /**< @brief Skylink is busy and rejected command. */
        Denied, /**< @brief Skylink denied the command. */
        Error, /**< @brief An error has occurred while executing the command. */
        Timeout, /**< @brief Command timed out. */
        WrongArgument, /**< @brief Command has wrong argument(s). */
        NoSystem, /**< @brief No system connected. */
        ProtocolUnsupported, /**< @brief Definition file protocol not supported. */
    };

    /**
     * @brief Stream operator to print information about a `SkylinkServer::Result`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::Result const& result);





    /**
     * @brief Type to represent a skylink information.
     */
    struct Information {
        
        std::string vendor_name{}; /**< @brief Name of the skylink vendor */
        std::string model_name{}; /**< @brief Name of the skylink model */
        std::string serial_number{}; /**< @brief Serial number of the skylink */
        std::string firmware_version{}; /**< @brief Firmware version of the skylink */
    };

    /**
     * @brief Equal operator to compare two `SkylinkServer::Information` objects.
     *
     * @return `true` if items are equal.
     */
    friend bool operator==(const SkylinkServer::Information& lhs, const SkylinkServer::Information& rhs);

    /**
     * @brief Stream operator to print information about a `SkylinkServer::Information`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::Information const& information);






    /**
     * @brief Information about the skylink storage.
     */
    struct StorageInformation {
        
        /**
     * @brief Storage status type.
     */
    enum class StorageStatus {
        NotAvailable, /**< @brief Storage not available. */
        Unformatted, /**< @brief Storage is not formatted (i.e. has no recognized file system). */
        Formatted, /**< @brief Storage is formatted (i.e. has recognized a file system). */
        NotSupported, /**< @brief Storage status is not supported. */
    };

    /**
     * @brief Stream operator to print information about a `SkylinkServer::StorageStatus`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::StorageInformation::StorageStatus const& storage_status);
        
        /**
     * @brief Storage type.
     */
    enum class StorageType {
        Unknown, /**< @brief Storage type unknown. */
        UsbStick, /**< @brief Storage type USB stick. */
        Sd, /**< @brief Storage type SD card. */
        Microsd, /**< @brief Storage type MicroSD card. */
        Hd, /**< @brief Storage type HD mass storage. */
        Other, /**< @brief Storage type other, not listed. */
    };

    /**
     * @brief Stream operator to print information about a `SkylinkServer::StorageType`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::StorageInformation::StorageType const& storage_type);
        
        StorageStatus storage_status{}; /**< @brief Storage status */
        StorageType storage_type{}; /**< @brief Storage type */
        float total_storage_mib{}; /**< @brief Total storage (in MiB) */
        float used_storage_mib{}; /**< @brief Used storage (in MiB) */
        float available_storage_mib{}; /**< @brief Available storage (in MiB) */
    };

    /**
     * @brief Equal operator to compare two `SkylinkServer::StorageInformation` objects.
     *
     * @return `true` if items are equal.
     */
    friend bool operator==(const SkylinkServer::StorageInformation& lhs, const SkylinkServer::StorageInformation& rhs);

    /**
     * @brief Stream operator to print information about a `SkylinkServer::StorageInformation`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::StorageInformation const& storage_information);




    /**
     * @brief Information about a .
     */
    struct FileInfo {
        
        std::string name{}; /**< @brief The name of  file */
        uint32_t index{}; /**< @brief Zero-based index of this  since vehicle was armed */
    };

    /**
     * @brief Equal operator to compare two `SkylinkServer::FileInfo` objects.
     *
     * @return `true` if items are equal.
     */
    friend bool operator==(const SkylinkServer::FileInfo& lhs, const SkylinkServer::FileInfo& rhs);

    /**
     * @brief Stream operator to print information about a `SkylinkServer::FileInfo`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::FileInfo const& file_info);




    /**
     * @brief 
     */
    struct EnterDevModeParams {
        
        uint32_t pwd_hashed{}; /**< @brief */
    };

    /**
     * @brief Equal operator to compare two `SkylinkServer::EnterDevModeParams` objects.
     *
     * @return `true` if items are equal.
     */
    friend bool operator==(const SkylinkServer::EnterDevModeParams& lhs, const SkylinkServer::EnterDevModeParams& rhs);

    /**
     * @brief Stream operator to print information about a `SkylinkServer::EnterDevModeParams`.
     *
     * @return A reference to the stream.
     */
    friend std::ostream& operator<<(std::ostream& str, SkylinkServer::EnterDevModeParams const& enter_dev_mode_params);


    /**
     * @brief Callback type for asynchronous SkylinkServer calls.
     */
    using ResultCallback = std::function<void(Result)>;




        

    /**
     * @brief Callback type for subscribe_information.
     */
    using InformationCallback = std::function<void(int32_t)>;

    /**
     * @brief Handle type for subscribe_information.
     */
    using InformationHandle = Handle<int32_t>;

    /**
     * @brief Subscribe to skylink information requests. Each request received should response to using RespondInformation
     */
    InformationHandle subscribe_information(const InformationCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_information
     */
    void unsubscribe_information(InformationHandle handle);

        








    /**
     * @brief Respond to skylink information from SubscribeInformation.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_information(SkylinkFeedback information_feedback, Information information) const;




        

    /**
     * @brief Callback type for subscribe_storage_information.
     */
    using StorageInformationCallback = std::function<void(int32_t)>;

    /**
     * @brief Handle type for subscribe_storage_information.
     */
    using StorageInformationHandle = Handle<int32_t>;

    /**
     * @brief Subscribe to skylink storage information requests. Each request received should response to using RespondStorageInformation
     */
    StorageInformationHandle subscribe_storage_information(const StorageInformationCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_storage_information
     */
    void unsubscribe_storage_information(StorageInformationHandle handle);

        








    /**
     * @brief Respond to skylink storage information from SubscribeStorageInformation.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_storage_information(SkylinkFeedback storage_information_feedback, StorageInformation storage_information) const;




        

    /**
     * @brief Callback type for subscribe_file_info.
     */
    using FileInfoCallback = std::function<void(std::string)>;

    /**
     * @brief Handle type for subscribe_file_info.
     */
    using FileInfoHandle = Handle<std::string>;

    /**
     * @brief Subscribe to  info requests. Each request received should respond to using RespondFileInfo.
     */
    FileInfoHandle subscribe_file_info(const FileInfoCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_file_info
     */
    void unsubscribe_file_info(FileInfoHandle handle);

        








    /**
     * @brief Respond to an  info request from SubscribeFileInfo.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_file_info(FileInfo file_info, SkylinkFeedback file_info_feedback) const;




        

    /**
     * @brief Callback type for subscribe_notify_file_update.
     */
    using NotifyFileUpdateCallback = std::function<void(FileUpdateType)>;

    /**
     * @brief Handle type for subscribe_notify_file_update.
     */
    using NotifyFileUpdateHandle = Handle<FileUpdateType>;

    /**
     * @brief Subscribe to notify  file update requests. Each request received should respond to using RespondNotifyFileUpdate.
     */
    NotifyFileUpdateHandle subscribe_notify_file_update(const NotifyFileUpdateCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_notify_file_update
     */
    void unsubscribe_notify_file_update(NotifyFileUpdateHandle handle);

        








    /**
     * @brief Respond to an notify  file update request from SubscribeNotifyFileUpdate.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_notify_file_update(SkylinkFeedback notify_file_update_feedback) const;




        

    /**
     * @brief Callback type for subscribe_update_firmware.
     */
    using UpdateFirmwareCallback = std::function<void(int32_t)>;

    /**
     * @brief Handle type for subscribe_update_firmware.
     */
    using UpdateFirmwareHandle = Handle<int32_t>;

    /**
     * @brief Subscribe to update the firmware of the skylink.
     */
    UpdateFirmwareHandle subscribe_update_firmware(const UpdateFirmwareCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_update_firmware
     */
    void unsubscribe_update_firmware(UpdateFirmwareHandle handle);

        








    /**
     * @brief Respond to update the firmware of the skylink.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_update_firmware(SkylinkFeedback update_firmware_feedback) const;




        

    /**
     * @brief Callback type for subscribe_restart.
     */
    using RestartCallback = std::function<void(int32_t)>;

    /**
     * @brief Handle type for subscribe_restart.
     */
    using RestartHandle = Handle<int32_t>;

    /**
     * @brief Subscribe to reset the skylink.
     */
    RestartHandle subscribe_restart(const RestartCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_restart
     */
    void unsubscribe_restart(RestartHandle handle);

        








    /**
     * @brief Respond to reset the skylink.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_restart(SkylinkFeedback reset_feedback) const;




        

    /**
     * @brief Callback type for subscribe_enter_dev_mode.
     */
    using EnterDevModeCallback = std::function<void(EnterDevModeParams)>;

    /**
     * @brief Handle type for subscribe_enter_dev_mode.
     */
    using EnterDevModeHandle = Handle<EnterDevModeParams>;

    /**
     * @brief Subscribe to enter developer mode requests. Each request received should respond to using RespondEnterDevMode.
     */
    EnterDevModeHandle subscribe_enter_dev_mode(const EnterDevModeCallback& callback);

    /**
     * @brief Unsubscribe from subscribe_enter_dev_mode
     */
    void unsubscribe_enter_dev_mode(EnterDevModeHandle handle);

        








    /**
     * @brief Respond to enter developer mode request from SubscribeEnterDevMode.
     *
     * This function is blocking.
     *
     * @return Result of request.
     */
    Result respond_enter_dev_mode(SkylinkFeedback enter_dev_mode_feedback) const;




    /**
     * @brief Copy constructor.
     */
    SkylinkServer(const SkylinkServer& other);

    /**
     * @brief Equality operator (object is not copyable).
     */
    const SkylinkServer& operator=(const SkylinkServer&) = delete;

private:
    /** @private Underlying implementation, set at instantiation */
    std::unique_ptr<SkylinkServerImpl> _impl;
};

} // namespace mavsdk